{{ define "content" }} {{ if .Gallery }}

<div class="max-w-7xl mx-auto">
  <!-- Gallery Grid -->
  <div
    id="gallery"
    class="{{if .Masonry }} columns-2 md:columns-3 lg:columns-3 gap-1 space-y-1 {{ else }} grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-1 {{ end }} "
  >
    <!-- Example gallery images - Replace these with your dynamic/media URLs -->
    {{ range .Images }}
    <!--Masonry Check-->
    {{ if $.Masonry }}
    <img
      src="{{ .URL }}"
      alt="Gallery Image 1"
      class="w-full h-auto object-cover cursor-pointer"
      data-large="{{ .URL }}"
      height="550"
      width="550"
    />
    {{ else }}
    <div class="relative aspect-square">
      <img
        src="{{ .URL }}"
        alt="Gallery Image 1"
        class="absolute inset-0 w-full h-full object-cover cursor-pointer"
        data-large="{{ .URL }}"
        height="550"
        width="550"
      />
    </div>
    {{ end }}
    <!-- Masonry Check End-->
    {{ end }}
    <!-- Add more images as needed -->
  </div>
</div>

<!-- LIGHTBOX MODAL -->
<div
  id="lightboxModal"
  class="fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/70 bg-opacity-90 hidden z-50"
>
  <!-- Close Button -->
  <button
    id="lightboxClose"
    class="absolute top-4 right-8 text-white text-3xl font-bold px-2 focus:outline-none cursor-pointer"
  >
    &times;
  </button>

  <!-- Prev Button -->
  <button
    id="lightboxPrev"
    class="absolute left-4 text-white text-3xl font-bold px-2 focus:outline-none cursor-pointer"
  >
    &#10094;
  </button>

  <!-- Next Button -->
  <button
    id="lightboxNext"
    class="absolute right-4 text-white text-3xl font-bold px-2 focus:outline-none cursor-pointer"
  >
    &#10095;
  </button>

  <!-- The Image -->
  <img
    id="lightboxImg"
    src=""
    alt="Lightbox Image"
    class="max-h-[80vh] max-w-[90vw] mx-auto"
  />
</div>

<!-- LIGHTBOX SCRIPT -->
<script>
  (function () {
    const modal = document.getElementById("lightboxModal");
    const modalImg = document.getElementById("lightboxImg");
    const closeBtn = document.getElementById("lightboxClose");
    const prevBtn = document.getElementById("lightboxPrev");
    const nextBtn = document.getElementById("lightboxNext");

    // Grab all images in the gallery
    const galleryImages = Array.from(document.querySelectorAll("#gallery img"));

    let currentIndex = 0;

    // Open Lightbox
    function openLightbox(index) {
      currentIndex = index;
      modal.classList.remove("hidden");
      modalImg.src = galleryImages[currentIndex].getAttribute("data-large");
    }

    // Close Lightbox
    function closeLightbox() {
      modal.classList.add("hidden");
    }

    // Show Next Image
    function showNext() {
      currentIndex = (currentIndex + 1) % galleryImages.length;
      modalImg.src = galleryImages[currentIndex].getAttribute("data-large");
    }

    // Show Previous Image
    function showPrev() {
      currentIndex =
        (currentIndex - 1 + galleryImages.length) % galleryImages.length;
      modalImg.src = galleryImages[currentIndex].getAttribute("data-large");
    }

    // Attach click events for all gallery images
    galleryImages.forEach((img, index) => {
      img.addEventListener("click", () => openLightbox(index));
    });

    // Attach event handlers to the lightbox controls
    closeBtn.addEventListener("click", closeLightbox);
    nextBtn.addEventListener("click", showNext);
    prevBtn.addEventListener("click", showPrev);

    // Optionally close lightbox when user clicks outside the image
    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeLightbox();
    });
  })();
</script>

{{ else }}
<p class="text-gray-500">No featured gallery selected yet.</p>
{{ end }}
<!--define-->
{{ end }}
