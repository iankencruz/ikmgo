{{ define "partials/media_item.html" }}

<!-- prettier-ignore -->
<div
  class="sortable-item border border-gray-300 p-2 rounded shadow-lg"
  data-id="{{ .ID }}"
  {{ with .Gallery }}
    data-gallery="{{ .ID }}"
  {{ end }}

>
  <img
    src="{{ .Media.ThumbnailURL }}"
    class="w-full h-40 object-cover rounded"
  />
  <p class="text-center text-sm mt-2 truncate">{{ .FileName }}</p>

  <form
    hx-post="/admin/media/unlink"
    hx-target="closest .sortable-item"
    hx-swap="outerHTML"
    hx-on:afterRequest="this.closest('.sortable-item').remove()"
    class="mt-2 text-center"
  >
    <input type="hidden" name="media_id" value="{{ .ID }}" />

    {{ if $.Gallery }}
    <input type="hidden" name="gallery_id" value="{{ $.Gallery.ID }}" />
    {{ end }}
    <!-- -->
    {{ if $.Project }}
    <input type="hidden" name="project_id" value="{{ $.Project.ID }}" />
    {{ end }}

    <button type="submit" class="text-red-500">Unlink</button>
  </form>
</div>
{{ end }}
